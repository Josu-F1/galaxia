<!doctype html>
<html lang=es>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Feliz Cumplea√±os</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Pacifico&family=Bungee&display=swap" rel="stylesheet">
<style>
body,html{margin:0;height:100%;background:#000;overflow:hidden;font-family:Arial,sans-serif}
canvas{display:block}
.welcome-container{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
  z-index:1000;
}
.welcome-text{
  font-size:72px;
  font-weight:400;
  background: linear-gradient(45deg, #FFFFFF, #E6E6FA, #DDA0DD, #9370DB, #FFFFFF);
  background-size: 300% 300%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-family:'Fredoka One', 'Pacifico', cursive;
  text-shadow:3px 3px 0px #8A2BE2, 6px 6px 10px rgba(0,0,0,0.8);
  margin-bottom:40px;
  animation:glow 2s ease-in-out infinite alternate, gradient 3s ease infinite;
  background:rgba(138,43,226,0.1);
  padding:25px;
  border-radius:25px;
  backdrop-filter:blur(8px);
  border:3px solid rgba(255,255,255,0.4);
  letter-spacing:1px;
  text-transform:none;
  position:relative;
}
.start-button{
  background:linear-gradient(45deg, #FFFFFF, #E6E6FA, #DDA0DD, #9370DB, #FFFFFF);
  background-size: 300% 300%;
  border:none;
  color:#4B0082;
  font-size:26px;
  font-weight:bold;
  font-family:'Fredoka One', cursive;
  padding:22px 45px;
  border-radius:50px;
  cursor:pointer;
  box-shadow:0 0 25px #DDA0DD, 0 0 45px #9370DB, 0 8px 15px rgba(0,0,0,0.3);
  transition:all 0.3s ease;
  text-transform:none;
  letter-spacing:1px;
  animation: buttonGradient 3s ease infinite;
  border: 3px solid #FFFFFF;
  text-shadow: 2px 2px 4px rgba(138,43,226,0.7);
}
.start-button:hover{
  transform:scale(1.15) rotate(2deg);
  box-shadow:0 0 35px #DDA0DD, 0 0 55px #9370DB, 0 0 70px #FFFFFF, 0 12px 25px rgba(0,0,0,0.4);
  border: 3px solid #E6E6FA;
  color:#2E0854;
}
@keyframes glow{
  from{text-shadow:3px 3px 0px #8A2BE2, 6px 6px 10px rgba(0,0,0,0.8)}
  to{text-shadow:3px 3px 0px #8A2BE2, 6px 6px 15px rgba(0,0,0,0.8), 0 0 30px #FFFFFF, 0 0 50px #DDA0DD}
}

@keyframes gradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes buttonGradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
.shooting-star {
  position: fixed;
  width: 4px;
  height: 4px;
  background: linear-gradient(45deg, #ffffff, #DDA0DD, #9370DB);
  border-radius: 50%;
  box-shadow: 0 0 15px #ffffff, 0 0 30px #DDA0DD;
  opacity: 0;
  pointer-events: none;
  z-index: 9999;
}

.shooting-star::before {
  content: '';
  position: absolute;
  top: 1px;
  right: 4px;
  width: 100px;
  height: 2px;
  background: linear-gradient(to right, rgba(255,255,255,0.8), rgba(221,160,221,0.4), transparent);
  border-radius: 50%;
  transform: rotate(45deg);
}

.shooting-star.large {
  width: 8px;
  height: 8px;
  box-shadow: 0 0 25px #ffffff, 0 0 50px #DDA0DD;
}

.shooting-star.large::before {
  width: 150px;
  height: 3px;
}

.shooting-star.small {
  width: 2px;
  height: 2px;
  box-shadow: 0 0 8px #ffffff, 0 0 15px #DDA0DD;
}

.shooting-star.small::before {
  width: 60px;
  height: 1px;
}

/* Fuegos artificiales din√°micos */
.firework-shell {
  position: fixed;
  width: 4px;
  height: 4px;
  background: #ffffff;
  border-radius: 50%;
  box-shadow: 0 0 10px #ffffff;
  opacity: 0;
  pointer-events: none;
  z-index: 9998;
}

.firework-particle {
  position: fixed;
  width: 3px;
  height: 3px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 9997;
}

.particle-trail {
  position: absolute;
  width: 2px;
  height: 15px;
  background: linear-gradient(to bottom, currentColor, transparent);
  border-radius: 50%;
  top: -15px;
  left: 0.5px;
}

.button-transform {
  animation: buttonToStar 0.8s ease-out forwards;
}

@keyframes buttonToStar {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.5) rotate(180deg);
    opacity: 0.8;
  }
  100% {
    transform: scale(0) rotate(360deg);
    opacity: 0;
  }
}

@keyframes shoot {
  0% {
    opacity: 1;
    transform: translateX(-100px) translateY(100px) scale(0);
  }
  10% {
    opacity: 1;
    transform: translateX(-50px) translateY(50px) scale(1);
  }
  90% {
    opacity: 1;
    transform: translateX(calc(100vw + 50px)) translateY(calc(-100vh - 50px)) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateX(calc(100vw + 100px)) translateY(calc(-100vh - 100px)) scale(0);
  }
}

@keyframes shootSlow {
  0% {
    opacity: 0.8;
    transform: translateX(-150px) translateY(150px) scale(0);
  }
  10% {
    opacity: 0.8;
    transform: translateX(-75px) translateY(75px) scale(1);
  }
  90% {
    opacity: 0.8;
    transform: translateX(calc(100vw + 75px)) translateY(calc(-100vh - 75px)) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateX(calc(100vw + 150px)) translateY(calc(-100vh - 150px)) scale(0);
  }
}

@keyframes shootFast {
  0% {
    opacity: 1;
    transform: translateX(-50px) translateY(50px) scale(0);
  }
  5% {
    opacity: 1;
    transform: translateX(-25px) translateY(25px) scale(1);
  }
  95% {
    opacity: 1;
    transform: translateX(calc(100vw + 25px)) translateY(calc(-100vh - 25px)) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateX(calc(100vw + 50px)) translateY(calc(-100vh - 50px)) scale(0);
  }
}

@keyframes shootFast {
  0% {
    opacity: 1;
    transform: translateX(-50px) translateY(50px) scale(0);
  }
  5% {
    opacity: 1;
    transform: translateX(-25px) translateY(25px) scale(1);
  }
  95% {
    opacity: 1;
    transform: translateX(calc(100vw + 25px)) translateY(calc(-100vh - 25px)) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateX(calc(100vw + 50px)) translateY(calc(-100vh - 50px)) scale(0);
  }
}

@keyframes fireworkShell {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  90% {
    opacity: 1;
    transform: translateY(-400px) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-450px) scale(1.5);
  }
}

@keyframes explodeParticle {
  0% {
    opacity: 1;
    transform: scale(0);
  }
  10% {
    opacity: 1;
    transform: scale(1);
  }
  70% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0.2);
  }
}

@media (max-width: 768px) {
  .welcome-text{font-size:36px}
  .start-button{font-size:18px; padding:15px 30px}
}
</style>
</head>
<body>
<canvas id=c></canvas>
<div class=welcome-container>
  <div class=welcome-text>
    üéâ Happy Birthday üéâ<br>
    ¬°Mi Estrella Favorita! ‚≠ê
  </div>
  <button class=start-button onclick="startCelebration()">
    üéÇ ¬°Comenzar Fiesta! ÔøΩ
  </button>
</div>

<script src=https://cdn.jsdelivr.net/npm/three@0.148.0/build/three.min.js></script>
<script>
const canvas=document.getElementById("c"),renderer=new THREE.WebGLRenderer({canvas:canvas,antialias:!0});
renderer.setPixelRatio(Math.min(window.devicePixelRatio||1,2)),renderer.setSize(innerWidth,innerHeight);
const scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,.1,5e3);
let targetDist=400,currentDist=400,rotX=.1,rotY=0;

const loader=new THREE.TextureLoader;
// Fondo espacial con alternativa de respaldo
const nebulaTex=loader.load(
  "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/cube/space/px.jpg",
  function(texture){
    scene.background=texture;
  },
  undefined,
  function(error){
    // Crear fondo de estrellas como respaldo
    const canvas=document.createElement('canvas');
    canvas.width=canvas.height=1024;
    const ctx=canvas.getContext('2d');
    const gradient=ctx.createRadialGradient(512,512,0,512,512,512);
    gradient.addColorStop(0,'#001122');
    gradient.addColorStop(0.5,'#000611');
    gradient.addColorStop(1,'#000000');
    ctx.fillStyle=gradient;
    ctx.fillRect(0,0,1024,1024);
    
    // Agregar estrellas al canvas
    ctx.fillStyle='#ffffff';
    for(let i=0;i<200;i++){
      const x=Math.random()*1024;
      const y=Math.random()*1024;
      const size=Math.random()*2;
      ctx.beginPath();
      ctx.arc(x,y,size,0,Math.PI*2);
      ctx.fill();
    }
    
    const fallbackTexture=new THREE.CanvasTexture(canvas);
    scene.background=fallbackTexture;
  }
);

// Estrellas de fondo
function createStars(count=3000,radius=4000){
  const geometry=new THREE.BufferGeometry;
  const positions=new Float32Array(count*3);
  for(let i=0;i<count;i++){
    const r=radius*(.2+.8*Math.random());
    const theta=Math.random()*Math.PI*2;
    const phi=Math.acos(2*Math.random()-1);
    positions[i*3]=r*Math.sin(phi)*Math.cos(theta);
    positions[i*3+1]=r*Math.cos(phi);
    positions[i*3+2]=r*Math.sin(phi)*Math.sin(theta);
  }
  geometry.setAttribute("position",new THREE.BufferAttribute(positions,3));
  scene.add(new THREE.Points(geometry,new THREE.PointsMaterial({size:2,color:16777215,depthWrite:!1})));
}
createStars();

// N√∫cleo central brillante
const coreMat=new THREE.MeshPhongMaterial({color:0x111199,transparent:!0,opacity:.4,shininess:300});
const core=new THREE.Mesh(new THREE.SphereGeometry(60,64,64),coreMat);
scene.add(core);

// Resplandor
function makeGlow(size=1024,color1="147,112,219",color2="138,43,226"){
  const canvas=document.createElement("canvas");
  canvas.width=canvas.height=size;
  const ctx=canvas.getContext("2d");
  const gradient=ctx.createRadialGradient(size/2,size/2,size*.05,size/2,size/2,size*.5);
  gradient.addColorStop(0,"rgba("+color1+",0.8)");
  gradient.addColorStop(.5,"rgba("+color2+",0.4)");
  gradient.addColorStop(1,"rgba(0,0,0,0)");
  ctx.fillStyle=gradient;
  ctx.fillRect(0,0,size,size);
  return new THREE.CanvasTexture(canvas);
}

const glow=new THREE.Sprite(new THREE.SpriteMaterial({map:makeGlow(),transparent:!0,depthWrite:!1}));
glow.scale.set(800,800,1);
scene.add(glow);

// Anillos giratorios
function ringTexture(size=768){
  const canvas=document.createElement("canvas");
  canvas.width=canvas.height=size;
  const ctx=canvas.getContext("2d");
  ctx.translate(size/2,size/2);
  const innerR=size*.3;
  const outerR=size*.48;
  const gradient=ctx.createRadialGradient(0,0,innerR*.3,0,0,outerR);
  gradient.addColorStop(0,"rgba(255,255,255,1)");
  gradient.addColorStop(.3,"rgba(221,160,221,0.9)");
  gradient.addColorStop(.65,"rgba(147,112,219,0.6)");
  gradient.addColorStop(1,"rgba(0,0,0,0)");
  ctx.fillStyle=gradient;
  ctx.beginPath();
  ctx.arc(0,0,outerR,0,Math.PI*2);
  ctx.arc(0,0,innerR,0,Math.PI*2,!0);
  ctx.closePath();
  ctx.fill();
  return new THREE.CanvasTexture(canvas);
}

const ring1=new THREE.Mesh(new THREE.RingGeometry(80,120,128),new THREE.MeshBasicMaterial({map:ringTexture(),transparent:!0,side:THREE.DoubleSide}));
const ring2=new THREE.Mesh(new THREE.RingGeometry(140,180,128),new THREE.MeshBasicMaterial({map:ringTexture(),transparent:!0,side:THREE.DoubleSide,opacity:.5}));
ring1.rotation.x=ring2.rotation.x=Math.PI/2;
scene.add(ring1);
scene.add(ring2);

// Movimiento de mouse suave
let mouseX=0,mouseY=0;
document.addEventListener("mousemove",(e)=>{
  mouseX=(e.clientX/window.innerWidth-0.5)*0.1;
  mouseY=(e.clientY/window.innerHeight-0.5)*0.1;
});

// Redimensionar
window.addEventListener("resize",()=>{
  camera.aspect=window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});

// Funci√≥n para crear fuegos artificiales din√°micos con explosi√≥n
function createDynamicFirework() {
  // Crear la concha del fuego artificial
  const shell = document.createElement('div');
  shell.className = 'firework-shell';
  
  // Posici√≥n inicial en la parte inferior
  const startX = 100 + Math.random() * (window.innerWidth - 200);
  const startY = window.innerHeight;
  
  shell.style.left = startX + 'px';
  shell.style.top = startY + 'px';
  shell.style.opacity = '1';
  shell.style.animation = 'fireworkShell 1.5s ease-out forwards';
  
  document.body.appendChild(shell);
  
  // Despu√©s de 1.3 segundos, crear la explosi√≥n
  setTimeout(() => {
    createFireworkExplosion(startX, startY - 400);
    // Remover la concha
    if (shell.parentNode) {
      shell.parentNode.removeChild(shell);
    }
  }, 1300);
}

// Funci√≥n para crear la explosi√≥n de part√≠culas
function createFireworkExplosion(x, y) {
  const colors = [
    '#FFFFFF', '#E6E6FA', '#DDA0DD', '#D8BFD8', 
    '#DA70D6', '#BA55D3', '#9370DB', '#8A2BE2',
    '#F8F8FF', '#F0F8FF', '#E0E6F8', '#D6D6FA'
  ];
  
  // Crear entre 30-50 part√≠culas para explosi√≥n m√°s grande
  const particleCount = 30 + Math.random() * 20;
  
  for (let i = 0; i < particleCount; i++) {
    const particle = document.createElement('div');
    particle.className = 'firework-particle';
    
    // Color blanco/plateado aleatorio
    const color = colors[Math.floor(Math.random() * colors.length)];
    particle.style.backgroundColor = color;
    particle.style.color = color;
    particle.style.boxShadow = `0 0 15px ${color}, 0 0 30px #ffffff`;
    
    // Agregar estela
    const trail = document.createElement('div');
    trail.className = 'particle-trail';
    particle.appendChild(trail);
    
    // Posici√≥n inicial en el punto de explosi√≥n
    particle.style.left = x + 'px';
    particle.style.top = y + 'px';
    particle.style.opacity = '1';
    
    // Calcular direcci√≥n aleatoria
    const angle = (Math.PI * 2 * i) / particleCount + (Math.random() - 0.5) * 0.5;
    const velocity = 60 + Math.random() * 180; // Velocidad aumentada
    const gravity = 0.4;
    
    const vx = Math.cos(angle) * velocity;
    const vy = Math.sin(angle) * velocity;
    
    // Animaci√≥n de la part√≠cula
    particle.style.animation = 'explodeParticle 3s ease-out forwards'; // Duraci√≥n aumentada
    
    document.body.appendChild(particle);
    
    // Simular f√≠sica de part√≠culas
    let currentX = x;
    let currentY = y;
    let currentVx = vx;
    let currentVy = vy;
    let time = 0;
    
    const animateParticle = () => {
      time += 0.02;
      currentX += currentVx * 0.02;
      currentY += currentVy * 0.02;
      currentVy += gravity;
      
      particle.style.left = currentX + 'px';
      particle.style.top = currentY + 'px';
      
      if (time < 3 && currentY < window.innerHeight + 100) {
        requestAnimationFrame(animateParticle);
      } else {
        if (particle.parentNode) {
          particle.parentNode.removeChild(particle);
        }
      }
    };
    
    requestAnimationFrame(animateParticle);
  }
}

// Funci√≥n para crear lluvia de fuegos artificiales din√°micos
function createStarShower() {
  // Primera oleada - m√°s fuegos artificiales din√°micos
  for(let i = 0; i < 12; i++) {
    setTimeout(() => {
      createDynamicFirework();
    }, i * 250);
  }
  
  // Segunda oleada despu√©s de 2 segundos
  setTimeout(() => {
    for(let i = 0; i < 10; i++) {
      setTimeout(() => {
        createDynamicFirework();
      }, i * 200);
    }
  }, 2000);
  
  // Tercera oleada despu√©s de 4 segundos
  setTimeout(() => {
    for(let i = 0; i < 8; i++) {
      setTimeout(() => {
        createDynamicFirework();
      }, i * 180);
    }
  }, 4000);
}

// Funci√≥n para ir a index.html con m√∫sica autom√°tica
function startCelebration(){
  const button = document.querySelector('.start-button');
  
  // Transformar el bot√≥n en estrella fugaz
  button.classList.add('button-transform');
  
  // Crear la lluvia de fuegos artificiales din√°micos
  createStarShower();
  
  // Crear un elemento de audio temporal para activar autoplay
  const tempAudio = new Audio();
  tempAudio.src = "https://www.dropbox.com/scl/fi/r0px58eteqtzujnrqnqya/Ed-Sheeran-Perfect-Official-Music-Video.mp3?rlkey=eoxh34zl62a5mroqa1kzlawqi&st=sj1q4xcl&raw=1";
  
  // Esperar 6 segundos para que se vean bien todas las explosiones
  setTimeout(() => {
    tempAudio.play().then(() => {
      // Si se puede reproducir, ir a la p√°gina principal
      window.location.href = 'index.html';
    }).catch(() => {
      // Si no se puede, ir igual (el usuario podr√° activar manualmente)
      window.location.href = 'index.html';
    });
  }, 6000);
}

// Animaci√≥n principal
let time=0;
function animate(){
  requestAnimationFrame(animate);
  time+=0.01;
  
  // Rotaci√≥n de anillos
  ring1.rotation.z+=0.003;
  ring2.rotation.z-=0.002;
  
  // Pulsaci√≥n del resplandor
  const glowScale=800*(1+0.1*Math.sin(time*0.5));
  glow.scale.set(glowScale,glowScale,1);
  
  // Pulsaci√≥n del n√∫cleo
  const coreScale=1+0.08*Math.sin(time*1.5);
  core.scale.set(coreScale,coreScale,coreScale);
  
  // Movimiento suave de c√°mara
  rotY+=mouseX*0.02;
  rotX+=mouseY*0.02;
  rotX=Math.max(-0.5,Math.min(0.5,rotX));
  
  // Rotaci√≥n autom√°tica suave
  rotY+=0.001;
  
  const cosRotX=Math.cos(rotX);
  const sinRotX=Math.sin(rotX);
  const cosRotY=Math.cos(rotY);
  const sinRotY=Math.sin(rotY);
  
  camera.position.set(
    currentDist*sinRotY*cosRotX,
    currentDist*sinRotX,
    currentDist*cosRotY*cosRotX
  );
  camera.lookAt(0,0,0);
  
  renderer.render(scene,camera);
}
animate();
</script>
</body>
</html>